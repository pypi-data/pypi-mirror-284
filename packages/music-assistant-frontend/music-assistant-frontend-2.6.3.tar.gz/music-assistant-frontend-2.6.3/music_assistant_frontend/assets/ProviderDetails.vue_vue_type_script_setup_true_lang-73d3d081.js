import{l as Z,m as J,f as t,ag as ee,F as L,d as Q,r as j,c as a,g as c,w as i,G as K,a0 as R,a1 as te,Z as ie,a6 as ae,aj as ne,a5 as oe,N as le,z as A,e as g,j as y,u as d,i as _,Y as I,t as f,h as D,a4 as B,ac as S,s as V,b as C,M as F,ak as se,_ as re,X as me}from"./index-e88c6493.js";import{_ as O}from"./eventbus-7678da61.js";import{M as H,j as x,n as ue,o as de,t as pe,q as ce,r as fe}from"./VCheckbox-883751a6.js";import{m as ye,a as ge,u as he,c as ve,s as P,w,A as q,B as G,V as N,z as ke}from"./VListItem-491c10d3.js";import{V as be}from"./VMenu-4e521d5b.js";import{T as M}from"./Toolbar-467aa5f2.js";import{V as _e,a as we}from"./VCardText-f0154468.js";import{a as T,V as U,b as $e}from"./VCard-adafbe13.js";import{b as Ce}from"./ItemsListing-5ac81740.js";import{a as E,V as W}from"./VList-d46bb86f.js";import{b as Ve,c as Te}from"./layout-2b951b2c.js";import{V as Ie}from"./VDialog-9b41d3a0.js";import{a as Le}from"./VCheckboxBtn-51ebcace.js";import{_ as Pe}from"./_plugin-vue_export-helper-c27b6911.js";import{L as ze}from"./ListItem-0db21e94.js";import{C as De}from"./Container-4ed10887.js";const Be=Z({...ye(),...ge(),...Ve()},"VLayout"),Re=J()({name:"VLayout",props:Be(),setup(k,m){let{slots:u}=m;const{layoutClasses:b,layoutStyles:p,getLayoutItem:o,items:r,layoutRef:h}=Te(k),{dimensionStyles:l}=he(k);return ve(()=>t("div",{ref:h,class:[b.value,k.class],style:[l.value,p.value,k.style]},[t(ee,null,{default:()=>{var v;return[t(L,null,[(v=u.default)==null?void 0:v.call(u)])]}})])),{getLayoutItem:o,items:r}}}),Ae=Q({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},openMenuOnClick:{type:Boolean,default:!1}},emits:["click"],setup(k,{emit:m}){const u=j(!1),b=m;return(p,o)=>(a(),c("div",{style:R(`width: ${p.width}px; height: 30px;`)},[t(be,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=r=>u.value=r),"close-on-content-click":!0,"nudge-width":200,"offset-x":"",scrim:"!store.showPlayersMenu","z-index":"100"},{activator:i(({props:r})=>[t(P,K({variant:"tonal"},r,{style:`
            width: ${p.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `}),{default:i(()=>[t(w,{icon:"mdi-menu-down",size:"xx-large",style:R(`width: 20px; margin-left: ${p.width-42}px`)},null,8,["style"])]),_:2},1040,["style"])]),default:i(()=>[te(p.$slots,"menu")]),_:3},8,["modelValue"]),t(P,{color:"primary",flat:"",disabled:p.disabled,style:R(`width: ${p.width-40}px; justify-content: left;`),text:p.text,onClick:o[1]||(o[1]=r=>p.openMenuOnClick?u.value=!u.value:b("click"))},ie({_:2},[p.icon&&p.text.length<12?{name:"prepend",fn:i(()=>[t(w,{icon:p.icon,size:"x-large"},null,8,["icon"])]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),Se={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center"}},He={key:0},xe={key:1},Ne={style:{width:"100%"}},Ue={style:{"padding-bottom":"10px"}},je=["onClick"],Fe={style:{color:"primary"}},Ee={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},Qe=["innerHTML"],Ye={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Ge=Q({__name:"InfoHeader",props:{item:{}},setup(k){const m=k,u=j(!1),b=j(),{mobile:p}=ae(),o=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,r=ne();oe(),le(()=>m.item,async e=>{e&&(b.value=x(m.item,S.FANART)||x(m.item,S.LANDSCAPE)||x(m.item,S.THUMB)||o)},{immediate:!0});const h=function(e){r.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},l=function(e){r.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},v=function(){var s;if(V.prevRoute){r.back();return}const e=((s=r.currentRoute.value.name)==null?void 0:s.toString())||"";for(const n of["artist","album","track","playlist","radio"])if(e.includes(n)){r.push({name:`${n}s`});return}r.push({name:"home"})},z=A(()=>m.item?m.item.metadata&&m.item.metadata.description?m.item.metadata.description:m.item.metadata&&m.item.metadata.copyright?m.item.metadata.copyright:("artists"in m.item&&m.item.artists.forEach(function(e){if("metadata"in e&&e.metadata.description)return e.metadata.description}),""):""),X=A(()=>z.value.replace(/(\r\n|\n|\r)/gm,"<br /><br />")),Y=A(()=>{const e=p.value?160:300;return z.value.length>e?z.value.replace(/(\r\n|\n|\r)/gm," ").substring(0,e)+"...":z.value.replace(/(\r\n|\n|\r)/gm," ")});return(e,s)=>(a(),c("div",null,[t(U,{variant:"flat",img:d(o),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?y("",!0):(a(),g(ke,{key:0,indeterminate:""})),t(q,{width:"100%",height:"100%",cover:"",class:"background-image",src:b.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),t(M,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":e.item?d(ue)([e.item],e.item):[],"enforce-overflow-menu":!0,"show-loading":d(C).fetchesInProgress.value.length>0||d(C).syncTasks.value.length>0,onIconClicked:v},null,8,["menu-items","show-loading"]),e.item?(a(),g(Re,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>[e.$vuetify.display.mobile?y("",!0):(a(),c("div",Se,[e.item.media_type&&e.item.media_type==d(F).ARTIST?(a(),c("div",He,[t(G,{size:"210",style:{"margin-bottom":"10%"}},{default:i(()=>[t(H,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(a(),c("div",xe,[t(H,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),_("div",Ne,[t(_e,null,{default:i(()=>[I(f(e.item.name),1)]),_:1}),_("div",Ue,["version"in e.item&&e.item.version?(a(),g(T,{key:0,class:"caption"},{default:i(()=>[I(f(e.item.version)+" ",1),t(Ce,{location:"bottom"},{activator:i(({props:n})=>[d(de)(e.item.metadata.explicit||!1)?(a(),g(w,K({key:0},n,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):y("",!0)]),default:i(()=>[_("span",null,f(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):y("",!0),"artists"in e.item&&e.item.artists?(a(),g(T,{key:1,class:"title accent--text"},{default:i(()=>[t(w,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(a(!0),c(L,null,D(e.item.artists,(n,$)=>(a(),c("span",{key:n.item_id},[_("a",{style:{color:"accent"},onClick:We=>l(n)},f(n.name),9,je),$+1<e.item.artists.length?(a(),c("span",{key:$,style:{color:"accent"}},f(" / "))):y("",!0)]))),128))]),_:1})):y("",!0),"owner"in e.item&&e.item.owner?(a(),g(T,{key:2,class:"title"},{default:i(()=>[t(w,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),_("a",Fe,f(e.item.owner),1)]),_:1})):y("",!0),"album"in e.item&&e.item.album?(a(),g(T,{key:3},{default:i(()=>[t(w,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),_("a",{style:{color:"secondary"},onClick:s[0]||(s[0]=n=>{var $;return h(($=e.item)==null?void 0:$.album)})},f(e.item.album.name),1)]),_:1})):y("",!0)]),_("div",Ee,[t(Ae,{width:220,icon:"mdi-play-circle-outline",text:d(pe)(e.$t("play"),14),disabled:!e.item,"open-menu-on-click":!d(V).activePlayerQueue,onClick:s[2]||(s[2]=n=>d(C).playMedia(e.item))},{menu:i(()=>[t(U,{width:"320"},{default:i(()=>[t(E,null,{default:i(()=>[t(N,{title:e.item.name,link:""},{prepend:i(()=>[t(G,null,{default:i(()=>[t(H,{item:e.item,size:"80"},null,8,["item"])]),_:1})]),title:i(()=>{var n;return[t(N,{variant:"text",title:e.$t("play_on"),subtitle:((n=d(V).activePlayerQueue)==null?void 0:n.display_name)||e.$t("no_player"),onClick:s[1]||(s[1]=B($=>d(V).showPlayersMenu=!0,["stop"]))},null,8,["title","subtitle"])]}),_:1},8,["title"])]),_:1}),t(W),t(E,{density:"compact",slim:"",tile:"",disabled:!d(V).activePlayerQueue},{default:i(()=>[(a(!0),c(L,null,D(d(ce)([e.item],e.item),n=>(a(),c("div",{key:n.label},[t(N,{title:e.$t(n.label,n.labelArgs||[]),density:"compact",onClick:n.action},{prepend:i(()=>[t(w,{style:{"padding-left":"15px"},icon:n.icon},null,8,["icon"])]),_:2},1032,["title","onClick"])]))),128))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["text","disabled","open-menu-on-click"]),t(P,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[s[3]||(s[3]=n=>d(C).toggleFavorite(e.item)),s[4]||(s[4]=B(()=>{},["prevent"])),s[5]||(s[5]=B(()=>{},["stop"]))]},null,8,["icon","title"]),t(O,{domain:e.item.provider,size:25,style:{"margin-top":"6px"}},null,8,["domain"])]),Y.value?(a(),g(T,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:s[6]||(s[6]=n=>u.value=!u.value)},{default:i(()=>[_("div",{innerHTML:Y.value},null,8,Qe)]),_:1})):y("",!0),e.item&&e.item.metadata.genres?(a(),c("div",Ye,[(a(!0),c(L,null,D(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),n=>(a(),g(Le,{key:n,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[I(f(n),1)]),_:2},1024))),128))])):y("",!0)])]),_:1})):y("",!0)]),_:1},8,["img"]),t(Ie,{modelValue:u.value,"onUpdate:modelValue":s[8]||(s[8]=n=>u.value=n),"max-width":"975",width:"auto"},{default:i(()=>[t(U,null,{default:i(()=>[t(we,{innerHTML:X.value},null,8,["innerHTML"]),t($e,null,{default:i(()=>[t(P,{color:"primary",block:"",onClick:s[7]||(s[7]=n=>u.value=!1)},{default:i(()=>[I(f(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const ct=Pe(Ge,[["__scopeId","data-v-b7d26799"]]),Ke={style:{"margin-bottom":"10px"}},Oe={key:0},qe=["title","onClick"],Me=["title"],ft=Q({__name:"ProviderDetails",props:{itemDetails:{}},setup(k){const m=function(o){window.open(o,"_blank")},u=se({}),b=function(o){const r=`${o.provider_instance}.${o.item_id}`,h=u[r];if(h)h.load(),delete u[r];else{const l=new Audio(p(o.provider_instance,o.item_id));u[r]=l,l.play()}},p=function(o,r){return`${C.baseUrl}/preview?item_id=${encodeURIComponent(r)}&provider=${o}`};return(o,r)=>(a(),c("section",Ke,[t(M,{title:o.$t("mapped_providers")},null,8,["title"]),t(W),t(De,null,{default:i(()=>[t(E,null,{default:i(()=>{var h;return[(a(!0),c(L,null,D((h=o.itemDetails)==null?void 0:h.provider_mappings,l=>(a(),g(ze,{key:l.provider_instance},{prepend:i(()=>[t(O,{domain:l.provider_domain,size:30},null,8,["domain"])]),title:i(()=>{var v;return[I(f((v=d(C).providerManifests[l.provider_domain])==null?void 0:v.name),1)]}),subtitle:i(()=>[o.itemDetails.media_type==d(F).TRACK&&l.audio_format?(a(),c("span",Oe,f(l.audio_format.content_type)+" | "+f(l.audio_format.sample_rate/1e3)+"kHz/"+f(l.audio_format.bit_depth)+" bits | ",1)):y("",!0),l.url&&!l.provider_domain.startsWith("file")?(a(),c("a",{key:1,style:{opacity:"0.4"},title:o.$t("tooltip.open_provider_link"),onClick:B(v=>m(l.url),["prevent"])},f(l.url),9,qe)):(a(),c("span",{key:2,style:{opacity:"0.4"},title:l.item_id},f(l.item_id),9,Me))]),append:i(()=>[l.audio_format&&l.audio_format.bit_depth>16?(a(),g(q,{key:0,src:d(fe),width:"30",class:re(o.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):y("",!0),d(me)("bp1")&&o.itemDetails.media_type==d(F).TRACK?(a(),g(P,{key:1,icon:u[`${l.provider_instance}.${l.item_id}`]?"mdi-pause":"mdi-play-circle",title:o.$t("tooltip.play_sample"),onClick:v=>b(l)},null,8,["icon","title","onClick"])):y("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]))}});export{ct as I,ft as _};
