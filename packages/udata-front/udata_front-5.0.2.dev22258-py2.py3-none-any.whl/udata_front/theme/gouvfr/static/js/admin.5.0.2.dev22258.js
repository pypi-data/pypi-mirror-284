import{defineComponent as M,resolveComponent as q,openBlock as r,createElementBlock as _,createElementVNode as e,normalizeClass as Y,createCommentVNode as k,createVNode as d,withCtx as v,createTextVNode as A,toDisplayString as s,unref as t,ref as y,onMounted as T,Fragment as L,renderList as U,createBlock as C,renderSlot as ee,watchEffect as N,Teleport as Z,withModifiers as F,computed as ie,createApp as le}from"vue";import{_ as G,c as I,i as S,E as de,aC as ce,ai as H,e as K,a as te,j as ue,J as _e,a9 as fe,aD as me,aE as X,aF as he,aG as pe,ag as be,aH as ve,aI as ge,aJ as oe,aK as ye,aL as $e,d as se,aM as we,an as ke,aN as ze,aO as Ae,as as Ce,ao as Me,av as J,aw as Re,ah as Ie,ax as qe,V as xe,aP as Oe,aQ as Se,ay as Te,az as Ve,aA as Be}from"./sentry.5.0.2.dev22258.js";import"./_commonjsHelpers.5.0.2.dev22258.js";function is(){import.meta.url,import("_").catch(()=>1);async function*$(){}}const Pe={class:"fr-sidemenu__item"},He=["innerHTML"],De=M({__name:"AdminSidebarLink",props:{label:{},icon:{},iconHtml:{},to:{}},setup($){return(o,n)=>{const i=q("router-link");return r(),_("li",Pe,[e("div",{class:Y([{"fr-icon-svg fr-icon--sm":o.iconHtml},"fr-enlarge-link fr-sidemenu__link fr-mb-1w"])},[o.iconHtml?(r(),_("div",{key:0,class:"fr-mr-1w fr-grid-row",innerHTML:o.iconHtml},null,8,He)):o.icon?(r(),_("div",{key:1,class:Y([o.icon,"fr-mr-1w fr-icon--sm"]),"aria-hidden":"true"},null,2)):k("",!0),d(i,{to:o.to},{default:v(()=>[A(s(o.label),1)]),_:1},8,["to"])],2)])}}});const P=G(De,[["__scopeId","data-v-6240fbee"]]),Ee='<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 12V18C5 18 5 21 12 21C19 21 19 18 19 18V12" stroke="currentColor" stroke-width="1.5"/>\n<path d="M5 6V12C5 12 5 15 12 15C19 15 19 12 19 12V6" stroke="currentColor" stroke-width="1.5"/>\n<path d="M12 3C19 3 19 6 19 6C19 6 19 9 12 9C5 9 5 6 5 6C5 6 5 3 12 3Z" stroke="currentColor" stroke-width="1.5"/>\n</svg>\n',Le=["aria-expanded","aria-controls","aria-current"],Ne={class:"logo logo--sm"},je={class:"fr-mx-1w fr-col text-overflow-ellipsis"},We=["id"],Ye={class:"fr-sidemenu__list fr-mx-1w fr-my-3v"},Ue=M({__name:"AdminSidebarOrganizationMenu",props:{organization:{},isOpened:{type:Boolean}},setup($){const{t:o}=I(),n=S("organization-menu");return(i,l)=>(r(),_("li",{class:Y(["fr-sidemenu__item",{"fr-sidemenu__item--active":i.isOpened}])},[e("button",{class:"fr-sidemenu__btn","aria-expanded":i.isOpened,"aria-controls":t(n),"aria-current":i.isOpened},[e("div",Ne,[d(de,{type:"organization",src:i.organization.logo_thumbnail,size:20},null,8,["src"])]),e("p",je,s(i.organization.name),1)],8,Le),e("div",{class:"fr-collapse","data-fr-js-collapse":"",id:t(n)},[e("ul",Ye,[d(P,{iconHtml:t(Ee),label:t(o)("Datasets"),to:{name:"organization-datasets",params:{oid:i.organization.id}}},null,8,["iconHtml","label","to"]),d(P,{icon:"fr-icon-line-chart-line",label:t(o)("Reuses"),to:{name:"organization-reuses",params:{oid:i.organization.id}}},null,8,["label","to"]),d(P,{icon:"fr-icon-parent-line",label:t(o)("Members"),to:{name:"organization-members",params:{oid:i.organization.id}}},null,8,["label","to"]),d(P,{icon:"fr-icon-user-line",label:t(o)("Profile"),to:{name:"organization-profile",params:{oid:i.organization.id}}},null,8,["label","to"])])],8,We)],2))}});const Fe=G(Ue,[["__scopeId","data-v-02c4027f"]]),Je={class:"fr-container--fluid h-100"},Ze={class:"fr-grid-row h-100 bg-grey-50"},Ge={class:"fr-col-12 fr-col-md-4 fr-col-lg-3 fr-col-xl-2"},Ke=["aria-label"],Qe={class:"fr-sidemenu__inner"},Xe=["aria-controls"],et=["id"],tt={class:"fr-sidemenu__list"},ot={class:"fr-sidemenu__item"},st=["aria-controls"],nt={class:"fr-mx-1v"},at=["id"],rt={class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-col-xl-10 h-100 fr-px-2w"},it=M({__name:"Admin",setup($){const{t:o}=I(),n=ce(),i=S("menu"),l=S("profil-submenu"),c=y(null),u=y(null);function m(p){return p===u.value}return T(async()=>{c.value=await H(),c.value.organizations.length>0&&(n.params.oid?u.value=n.params.oid:u.value=c.value.organizations[0].id)}),(p,b)=>{const z=q("router-view");return r(),_("div",Je,[e("div",Ze,[e("div",Ge,[e("nav",{class:"fr-sidemenu","aria-label":t(o)("Administration menu")},[e("div",Qe,[e("button",{class:"fr-sidemenu__btn",hidden:"","aria-controls":t(i),"aria-expanded":"false"},s(t(o)("Open menu")),9,Xe),e("div",{class:"fr-collapse",id:t(i)},[e("ul",tt,[e("li",ot,[e("button",{class:"fr-sidemenu__btn border-bottom border-default-grey","aria-expanded":"false","aria-controls":t(l)},[d(K,{user:t(te),size:24,rounded:!0},null,8,["user"]),e("p",nt,s(t(o)("My Profil")),1)],8,st),e("div",{class:"fr-collapse",id:t(l)},[d(P,{icon:"fr-icon-account-circle-line",label:t(o)("Me"),to:"/me"},null,8,["label"])],8,at)]),c.value?(r(!0),_(L,{key:0},U(c.value.organizations,f=>(r(),C(Fe,{organization:f,"is-opened":m(f.id)},null,8,["organization","is-opened"]))),256)):k("",!0)])],8,et)])],8,Ke)]),e("div",rt,[(r(),C(z,{key:t(n).fullPath}))])])])}}});const lt=G(it,[["__scopeId","data-v-288c086e"]]),dt=["aria-label"],ct={class:"fr-breadcrumb__list"},D={__name:"Breadcrumb",setup($){const{t:o}=I();return(n,i)=>(r(),_("nav",{rol:"navigation","aria-label":t(o)("You're here:"),class:"fr-breadcrumb fr-mb-5v"},[e("ol",ct,[ee(n.$slots,"default")])],8,dt))}},ut={class:"fr-container--fluid"},_t={key:0},ft={class:"fr-breadcrumb__link","aria-current":"page"},mt={class:"fr-alert fr-alert--info"},ht={class:"fr-alert__title"},pt=M({__name:"Datasets",props:{oid:{}},setup($){const{t:o}=I(),n=$,i="/admin/organization/".concat(n.oid,"/"),l=y(null),c=y(null);return T(async()=>l.value=await H()),N(()=>{var u,m;c.value=(m=(u=l.value)==null?void 0:u.organizations.find(p=>p.id===n.oid))!=null?m:null}),(u,m)=>{const p=q("router-link");return r(),_("div",ut,[d(D,null,{default:v(()=>[e("li",null,[d(p,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(t(o)("Administration")),1)]),_:1})]),c.value?(r(),_("li",_t,[d(p,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(c.value.name),1)]),_:1})])):k("",!0),e("li",null,[e("a",ft,s(t(o)("Datasets")),1)])]),_:1}),e("div",mt,[e("h3",ht,s(t(o)("This is a WIP page")),1),e("p",null,[e("a",{href:i},s(t(o)("You can manage your datasets on the current admin.")),1)])])])}}}),bt={class:"fr-container--fluid"},vt={key:0},gt={class:"fr-breadcrumb__link","aria-current":"page"},yt={class:"fr-alert fr-alert--info"},$t={class:"fr-alert__title"},wt=M({__name:"Reuses",props:{oid:{}},setup($){const{t:o}=I(),n=$,i="/admin/organization/".concat(n.oid,"/"),l=y(null),c=y(null);return T(async()=>l.value=await H()),N(()=>{var u,m;c.value=(m=(u=l.value)==null?void 0:u.organizations.find(p=>p.id===n.oid))!=null?m:null}),(u,m)=>{const p=q("router-link");return r(),_("div",bt,[d(D,null,{default:v(()=>[e("li",null,[d(p,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(t(o)("Administration")),1)]),_:1})]),c.value?(r(),_("li",vt,[d(p,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(c.value.name),1)]),_:1})])):k("",!0),e("li",null,[e("a",gt,s(t(o)("Reuses")),1)])]),_:1}),e("div",yt,[e("h3",$t,s(t(o)("This is a WIP page")),1),e("p",null,[e("a",{href:i},s(t(o)("You can manage your reuses on the current admin.")),1)])])])}}}),kt={class:"fr-container--fluid"},zt={class:"fr-breadcrumb__link","aria-current":"page"},At={key:0,class:"fr-h1"},Ct={class:"fr-alert fr-alert--info"},Mt={class:"fr-alert__title"},Rt={href:"/admin/me/"},It=M({__name:"Me",setup($){const{t:o}=I(),n=y(null);return T(async()=>n.value=await H()),(i,l)=>{const c=q("router-link");return r(),_("div",kt,[d(D,null,{default:v(()=>[e("li",null,[d(c,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(t(o)("Administration")),1)]),_:1})]),e("li",null,[e("a",zt,s(t(o)("Me")),1)])]),_:1}),n.value?(r(),_("h1",At,s(n.value.first_name)+" "+s(n.value.last_name),1)):k("",!0),e("div",Ct,[e("h3",Mt,s(t(o)("This is a WIP page")),1),e("p",null,[e("a",Rt,s(t(o)("You can edit your profil on the current admin.")),1)])])])}}}),qt={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},ne=M({__name:"AdminDangerZone",setup($){return(o,n)=>(r(),C(t(ue),{color:"error",type:"secondary",weight:"regular"},{default:v(()=>[e("div",qt,[ee(o.$slots,"default")])]),_:3}))}}),xt={class:"fr-mt-n9v fr-mb-2w"},Ot={class:"fr-badge fr-badge--info fr-badge--no-icon"},St=e("span",{class:"fr-icon-user-add-line","aria-hidden":"true"},null,-1),Tt={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},Vt={class:"fr-col"},Bt={class:"fr-grid-row fr-grid-row--middle"},Pt={class:"fr-ml-3v fr-mt-1-5v fr-mb-0 filet filet-default-grey fr-text--sm"},Ht={key:0,class:"fr-col-auto fr-grid-row flex-direction-column"},Dt=["disabled"],Et=["disabled","aria-controls"],Lt=["aria-labelledby","id"],Nt={class:"fr-container fr-container--fluid fr-container-md"},jt={class:"fr-grid-row fr-grid-row--center"},Wt={class:"fr-col-12 fr-col-md-8"},Yt={class:"fr-modal__body"},Ut={class:"fr-modal__header"},Ft=["title","aria-controls"],Jt={class:"fr-modal__content"},Zt=["id"],Gt={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--right"},Kt={class:"fr-col-auto"},Qt=["disabled"],Xt={class:"fr-col-auto"},eo=["disabled"],to=M({__name:"MembershipRequest",props:{loading:{type:Boolean},oid:{},request:{},showActions:{type:Boolean}},emits:["accept","refuse"],setup($,{emit:o}){const n=$,i=o,{t:l}=I(),c=y(""),u=S("modal"),m=S("modalTitle");function p(){const f=document.getElementById(u);globalThis.dsfr(f).modal.conceal()}function b(){i("refuse",n.request.id,c.value),p()}function z(){c.value="",p()}return(f,R)=>{const B=q("MembershipRequest",!0);return r(),C(_e,{class:"drop-shadow rounded-xxs fr-mt-3w"},{default:v(()=>[e("div",xt,[e("p",Ot,[St,A(" "+s(t(l)("Membership Request")),1)])]),e("div",Tt,[e("div",Vt,[e("div",Bt,[d(K,{class:"fr-mr-1v",user:f.request.user,rounded:!0,size:24},null,8,["user"]),A(" "+s(t(l)("{fullName} asks to join the organization.",{fullName:f.request.user.first_name+" "+f.request.user.last_name})),1)]),e("div",Pt,s(f.request.comment),1)]),f.showActions?(r(),_("div",Ht,[e("button",{class:"fr-btn fr-btn--sm fr-btn--icon-left fr-mb-1w fr-icon-check-line",onClick:R[0]||(R[0]=x=>f.$emit("accept",f.request.id)),disabled:f.loading,"data-testid":"accept"},s(t(l)("Accept request")),9,Dt),e("button",{class:"fr-btn fr-btn--icon-left fr-btn--sm fr-btn--secondary fr-btn--secondary--error fr-icon-close-line",disabled:f.loading,"data-fr-opened":"false","aria-controls":t(u),"data-testid":"refuse"},s(t(l)("Refuse")),9,Et),(r(),C(Z,{to:"body"},[e("dialog",{"aria-labelledby":t(m),role:"dialog",id:t(u),class:"fr-modal","data-testid":"modal"},[e("div",Nt,[e("div",jt,[e("div",Wt,[e("div",Yt,[e("div",Ut,[e("button",{class:"fr-btn--close fr-btn",title:t(l)("Close the modal dialog"),"aria-controls":t(u),onClick:F(z,["prevent"])},s(t(l)("Close")),9,Ft)]),e("div",Jt,[e("h1",{id:t(m),class:"fr-modal__title fr-mb-2w"},s(t(l)("Refuse membership request")),9,Zt),d(B,{class:"fr-mt-4w fr-mb-2w",loading:!1,oid:f.oid,request:f.request,"show-actions":!1},null,8,["oid","request"]),e("form",{onSubmit:F(b,["prevent"]),onReset:z},[d(fe,{label:t(l)("You can provide the refusal reason:"),modelValue:c.value,"onUpdate:modelValue":R[1]||(R[1]=x=>c.value=x),"data-testid":"comment-group"},null,8,["label","modelValue"]),e("div",Gt,[e("div",Kt,[e("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",type:"reset",disabled:f.loading,"data-testid":"cancel-modal-button"},s(t(l)("Cancel")),9,Qt)]),e("div",Xt,[e("button",{class:"fr-btn",type:"submit",disabled:f.loading,"data-testid":"refuse-modal-button"},s(t(l)("Refuse request")),9,eo)])])],32)])])])])])],8,Lt)]))])):k("",!0)])]),_:1})}}}),oo={key:0},so=e("li",null,null,-1),no={class:"fr-h1 fr-mb-2w"},ao={class:"subtitle subtitle--uppercase"},ro={class:"subtitle subtitle--uppercase fr-mt-2w fr-mb-1v"},io={class:"fr-table fr-table--layout-fixed"},lo={scope:"col"},co={scope:"col"},uo={key:0,scope:"col"},_o={class:"fr-badge"},fo={key:0},mo=["aria-controls"],ho=["aria-labelledby","id"],po={class:"fr-container fr-container--fluid fr-container-md"},bo={class:"fr-grid-row fr-grid-row--center"},vo={class:"fr-col-12 fr-col-md-8"},go={class:"fr-modal__body"},yo={class:"fr-modal__header"},$o=["title","aria-controls"],wo={class:"fr-modal__content"},ko=["id"],zo={class:"fr-grid-row fr-grid-row--middle fr-text--bold fr-mb-2w"},Ao=["onSubmit"],Co={class:"fr-col"},Mo={class:"fr-col-auto"},Ro=["disabled"],Io={class:"fr-col"},qo={class:"fr-m-0 text-grey-500"},xo={class:"fr-m-0 fr-text--xs text-default-error"},Oo={class:"fr-col-auto"},So=["disabled","onClick"],To=M({__name:"Members",props:{oid:{}},setup($){const o=$,{t:n}=I(),{toast:i}=se(),l=y([]),c=ie(()=>me||p.value.some(a=>{var g;return a.user.id===((g=te)==null?void 0:g.id)&&a.role==="admin"})),u=y([]),m={name:"SomeName"},p=y([]),b=y(!1);function z(a){return"fr-modal-user-"+a}function f(a){return"fr-modal-title-user-"+a}function R(a){const g=document.getElementById(z(a));globalThis.dsfr(g).modal.conceal()}async function B(a){if(!a.newRole){R(a.user.id);return}try{b.value=!0,await ve(o.oid,a.user.id,a.newRole),O(),R(a.user.id)}catch(g){i.error(n("An error occurred while updating the member role."))}finally{b.value=!1}}async function x(a){try{b.value=!0,await ge(o.oid,a.user.id),O()}catch(g){i.error(n("An error occurred while removing this member."))}finally{b.value=!1}}function j(a){var g,w;return(w=(g=u.value.find(h=>h.value===a))==null?void 0:g.label)!=null?w:a}function E(a){return u.value.map(g=>{const w={...g};return w.value===a&&(w.selected=!0),w})}async function O(){const a=await oe(o.oid);p.value=a.members}async function Q(){const a=await X(o.oid);l.value=a}async function ae(a){b.value=!0;const g=[];try{await ye(o.oid,a),g.push(Q()),g.push(O())}catch(w){i.error(n("An error occurred while accepting this membership."))}finally{Promise.all(g).finally(()=>b.value=!1)}}async function re(a,g){b.value=!0;const w=[];try{await $e(o.oid,a,g),w.push(Q()),w.push(O())}catch(h){i.error(n("An error occurred while refusing this membership."))}finally{Promise.all(w).finally(()=>b.value=!1)}}return N(()=>{c.value&&X(o.oid).then(a=>l.value=a)}),T(()=>{he().then(pe).then(a=>u.value=a),O()}),(a,g)=>{const w=q("router-link");return r(),_("div",null,[d(D,null,{default:v(()=>[e("li",null,[d(w,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(t(n)("Administration")),1)]),_:1})]),m?(r(),_("li",oo,[d(w,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(m.name),1)]),_:1})])):k("",!0),so]),_:1}),e("h1",no,s(t(n)("Members")),1),l.value.length?(r(),_(L,{key:0},[e("h2",ao,s(t(n)("{n} requests",{n:l.value.length})),1),(r(!0),_(L,null,U(l.value,h=>(r(),C(to,{class:"fr-mb-4w",key:h.id,loading:b.value,oid:a.oid,request:h,"show-actions":!0,onAccept:ae,onRefuse:re},null,8,["loading","oid","request"]))),128))],64)):k("",!0),e("h2",ro,s(t(n)("{n} members",{n:p.value.length})),1),e("div",io,[e("table",null,[e("thead",null,[e("tr",null,[e("th",lo,s(t(n)("Members")),1),e("th",co,s(t(n)("Status")),1),c.value?(r(),_("th",uo,s(t(n)("Action")),1)):k("",!0)])]),e("tbody",null,[(r(!0),_(L,null,U(p.value,h=>(r(),_("tr",{key:h.user.id},[e("td",null,s(h.user.first_name)+" "+s(h.user.last_name),1),e("td",null,[e("p",_o,s(j(h.role)),1)]),c.value?(r(),_("td",fo,[e("button",{class:"fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-icon-pencil-line","data-fr-opened":"false","aria-controls":z(h.user.id)},s(t(n)("Edit")),9,mo),(r(),C(Z,{to:"body"},[e("dialog",{"aria-labelledby":f(h.user.id),role:"dialog",id:z(h.user.id),class:"fr-modal"},[e("div",po,[e("div",bo,[e("div",vo,[e("div",go,[e("div",yo,[e("button",{class:"fr-btn--close fr-btn",title:t(n)("Close the modal dialog"),"aria-controls":z(h.user.id)},s(t(n)("Close")),9,$o)]),e("div",wo,[e("h1",{id:f(h.user.id),class:"fr-modal__title fr-mb-2w"},s(t(n)("Edit member")),9,ko),e("p",zo,[d(K,{class:"fr-mr-1v",user:h.user,rounded:!0,size:24},null,8,["user"]),A(" "+s(h.user.first_name)+" "+s(h.user.last_name),1)]),e("form",{class:"fr-grid-row fr-grid-row--gutters fr-grid-row--bottom",onSubmit:F(W=>B(h),["prevent"])},[e("div",Co,[u.value.length>0?(r(),C(be,{key:0,label:t(n)("Role of the member"),"model-value":h.role,"onUpdate:modelValue":W=>h.newRole=W,options:E(h.role)},null,8,["label","model-value","onUpdate:modelValue","options"])):k("",!0)]),e("div",Mo,[e("button",{class:"fr-btn",type:"submit",disabled:b.value},s(t(n)("Validate")),9,Ro)])],40,Ao),d(ne,{class:"fr-mt-2w"},{default:v(()=>[e("div",Io,[e("p",qo,s(t(n)("Remove member from the organization")),1),e("p",xo,s(t(n)("Be careful, this action can't be reverse.")),1)]),e("div",Oo,[e("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-logout-box-r-line",disabled:b.value,onClick:W=>x(h)},s(t(n)("Remove member")),9,So)])]),_:2},1024)])])])])])],8,ho)]))])):k("",!0)]))),128))])])])])}}}),Vo={class:"fr-container--fluid"},Bo={key:0},Po={class:"fr-breadcrumb__link","aria-current":"page"},Ho=["id"],Do=["disabled","onClick"],Eo={class:"fr-col"},Lo={class:"fr-m-0 text-grey-500"},No={class:"fr-m-0 fr-text--xs text-default-error"},jo={class:"fr-col-auto"},Wo=["disabled","aria-controls"],Yo=["aria-labelledby","id"],Uo={class:"fr-container fr-container--fluid fr-container-md"},Fo={class:"fr-grid-row fr-grid-row--center"},Jo={class:"fr-col-12 fr-col-md-8"},Zo={class:"fr-modal__body"},Go={class:"fr-modal__header"},Ko=["title","aria-controls"],Qo={class:"fr-modal__content"},Xo=["id"],es={class:"fr-text--bold"},ts={class:"fr-modal__footer"},os={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},ss=["disabled"],ns=M({__name:"Profile",props:{oid:{}},setup($){const{t:o}=I(),{toast:n}=se(),i=$,l=we(),c=y(null),u=y(null),m=y(null),p=y([]),b=y(!1),z=S("modal"),f=S("modalTitle");function R(){m.value&&(b.value=!0,ze(m.value.id).then(()=>{l.replace("/"),window.location.reload()}).catch(()=>n.error(o("An error occured when deleting the organization."))).finally(()=>b.value=!1))}function B(x,j){b.value=!0,Ae(x).then(()=>n.success(o("Organization updated !"))).catch(()=>n.error(o("An error occured when updating the organization."))).finally(()=>b.value=!1)}return T(async()=>c.value=await H()),N(async()=>{m.value=await oe(i.oid)}),(x,j)=>{const E=q("router-link");return r(),_("div",Vo,[d(D,null,{default:v(()=>[e("li",null,[d(E,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(t(o)("Administration")),1)]),_:1})]),m.value?(r(),_("li",Bo,[d(E,{class:"fr-breadcrumb__link",to:"/"},{default:v(()=>[A(s(m.value.name),1)]),_:1})])):k("",!0),e("li",null,[e("a",Po,s(t(o)("Profile")),1)])]),_:1}),u.value?(r(),_("h2",{key:0,class:"subtitle subtitle--uppercase fr-mb-5v",id:u.value.legend},s(t(o)("Edit profile")),9,Ho)):k("",!0),m.value?(r(),C(ke,{key:1,organization:m.value,errors:p.value,showLegend:!1,showWell:!1,ref_key:"form",ref:u,onSubmit:B},{submitButton:v(({submit:O})=>[e("button",{class:"fr-btn fr-btn--icon-left fr-icon-save-line",disabled:b.value,"data-testid":"submitButton",onClick:O},s(t(o)("Save")),9,Do)]),default:v(()=>[d(ne,{class:"fr-mt-6w"},{default:v(()=>[e("div",Eo,[e("p",Lo,s(t(o)("Delete the organization")),1),e("p",No,s(t(o)("Be careful, this action can't be reverse.")),1)]),e("div",jo,[e("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-delete-line",disabled:b.value,"data-fr-opened":"false","aria-controls":t(z)},s(t(o)("Delete")),9,Wo),(r(),C(Z,{to:"body"},[e("dialog",{"aria-labelledby":t(f),role:"dialog",id:t(z),class:"fr-modal"},[e("div",Uo,[e("div",Fo,[e("div",Jo,[e("div",Zo,[e("div",Go,[e("button",{class:"fr-btn--close fr-btn",title:t(o)("Close the modal dialog"),"aria-controls":t(z)},s(t(o)("Close")),9,Ko)]),e("div",Qo,[e("h1",{id:t(f),class:"fr-modal__title fr-mb-2w"},s(t(o)("Are you sure you want to delete this organization ?")),9,Xo),e("p",es,s(t(o)("This action can't be reverse.")),1),e("p",null,s(t(o)("All content published with this organization will stay online, with the same URL but in an anonymous form, i.e. without being linked to a data producer.")),1),e("p",null,s(t(o)("If you want to delete your published content too, start by deleting the contents before deleting your account.")),1)]),e("div",ts,[e("div",os,[e("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error",role:"button",disabled:b.value,onClick:R},s(t(o)("Delete")),9,ss)])])])])])])],8,Yo)]))])]),_:1})]),_:1},8,["organization","errors"])):k("",!0)])}}});Ce({admin_root:Me,default_lang:J.global.locale.value,explorable_resources:Re,only_locales:J.global.locale.value,schema_documentation_url:Ie,schema_validata_url:qe,show_copy_resource_permalink:!0,title:xe});const as=[{path:"/me",component:It},{path:"/organizations/:oid",children:[{path:"datasets",component:pt,props:!0,name:"organization-datasets"},{path:"reuses",component:wt,props:!0,name:"organization-reuses"},{path:"members",component:To,props:!0,name:"organization-members"},{path:"profile",component:ns,props:!0,name:"organization-profile"}]}],rs=Oe({history:Se(),routes:as}),V=le(lt);Te(V);V.use(Ve);V.use(Be);V.use(J);V.use(rs);V.mount("#admin");globalThis.dsfr.start();console.log("JS is injected !");export{is as __vite_legacy_guard};
