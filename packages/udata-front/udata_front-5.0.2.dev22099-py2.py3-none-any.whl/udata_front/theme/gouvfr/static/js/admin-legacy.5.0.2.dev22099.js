System.register(["vue","./sentry-legacy.5.0.2.dev22099.js","./_commonjsHelpers-legacy.5.0.2.dev22099.js"],(function(e,r){"use strict";var a,l,t,n,o,i,s,d,u,c,f,m,b,v,g,p,_,h,y,w,k,x,z,C,A,q,M,R,B,V,S,T,E,H,I,P,D,N,O,j,L,Y,$,U,W,J,F,Z,G,K,Q,X,ee,re,ae,le,te,ne,oe,ie,se,de,ue;return{setters:[e=>{a=e.defineComponent,l=e.resolveComponent,t=e.openBlock,n=e.createElementBlock,o=e.createElementVNode,i=e.normalizeClass,s=e.createCommentVNode,d=e.createVNode,u=e.withCtx,c=e.createTextVNode,f=e.toDisplayString,m=e.unref,b=e.ref,v=e.onMounted,g=e.Fragment,p=e.renderList,_=e.createBlock,h=e.renderSlot,y=e.watchEffect,w=e.Teleport,k=e.withModifiers,x=e.computed,z=e.createApp},e=>{C=e._,A=e.c,q=e.i,M=e.E,R=e.b,B=e.q,V=e.v,S=e.aA,T=e.e,E=e.a,H=e.j,I=e.J,P=e.a8,D=e.aB,N=e.aC,O=e.aD,j=e.aE,L=e.af,Y=e.aF,$=e.aG,U=e.aH,W=e.aI,J=e.aJ,F=e.d,Z=e.aK,G=e.al,K=e.aL,Q=e.aM,X=e.aq,ee=e.am,re=e.at,ae=e.au,le=e.ag,te=e.av,ne=e.V,oe=e.aN,ie=e.aO,se=e.aw,de=e.ax,ue=e.ay},null],execute:function(){var e=document.createElement("style");e.textContent=".fr-sidemenu__link[data-v-6240fbee]{padding:.25rem .375rem}.fr-sidemenu__link[aria-current][data-v-6240fbee]:before{width:0}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]){border-radius:2px;background-color:var(--background-alt-grey);color:var(--text-default-grey);font-weight:800}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]):hover{background-color:var(--background-alt-grey-hover)}.fr-sidemenu__link[data-v-6240fbee]:has(>[aria-current]):active{background-color:var(--background-alt-grey-active)}.fr-sidemenu__btn[data-v-02c4027f]{background-color:var(--background-alt-grey);border-bottom:1px solid var(--border-default-grey)}.fr-sidemenu__btn[data-v-02c4027f]:hover{background-color:var(--background-alt-grey-hover)}.fr-sidemenu__btn[data-v-02c4027f]:active{background-color:var(--background-alt-grey-active)}.fr-sidemenu__btn[aria-current][data-v-02c4027f]{background-color:var(--background-default-grey);color:var(--text-default-grey)}.fr-sidemenu__btn[aria-current][data-v-02c4027f]:before{width:0}.fr-sidemenu__btn[aria-current][data-v-02c4027f]:hover{background-color:var(--hover-tint)}.fr-sidemenu__btn[aria-current][data-v-02c4027f]:active{background-color:var(--active-tint)}html,body{height:100%}#app{display:flex;flex-direction:column;height:100%}.fr-sidemenu .fr-sidemenu__item:first-child:before,.fr-sidemenu .fr-sidemenu__item:last-child:before,.fr-sidemenu .fr-sidemenu__item:before{box-shadow:none}.fr-sidemenu[data-v-288c086e]{padding:0}.fr-sidemenu .fr-sidemenu__inner[data-v-288c086e]{padding:0;box-shadow:1px 0 0 0 var(--border-default-grey);background-color:var(--grey-1000-50)}@media (min-width: 48em){.fr-sidemenu[data-v-288c086e],.fr-sidemenu__inner[data-v-288c086e]{height:100%}}\n",document.head.appendChild(e);const r={class:"fr-sidemenu__item"},ce=["innerHTML"],fe=C(a({__name:"AdminSidebarLink",props:{label:{},icon:{},iconHtml:{},to:{}},setup:e=>(e,a)=>{const m=l("router-link");return t(),n("li",r,[o("div",{class:i([{"fr-icon-svg fr-icon--sm":e.iconHtml},"fr-enlarge-link fr-sidemenu__link fr-mb-1w"])},[e.iconHtml?(t(),n("div",{key:0,class:"fr-mr-1w fr-grid-row",innerHTML:e.iconHtml},null,8,ce)):e.icon?(t(),n("div",{key:1,class:i([e.icon,"fr-mr-1w fr-icon--sm"]),"aria-hidden":"true"},null,2)):s("",!0),d(m,{to:e.to},{default:u((()=>[c(f(e.label),1)])),_:1},8,["to"])],2)])}}),[["__scopeId","data-v-6240fbee"]]),me=["aria-expanded","aria-controls","aria-current"],be={class:"logo logo--sm"},ve={class:"fr-mx-1w fr-col text-overflow-ellipsis"},ge=["id"],pe={class:"fr-sidemenu__list fr-mx-1w fr-my-3v"},_e=a({__name:"AdminSidebarOrganizationMenu",props:{organization:{},isOpened:{type:Boolean}},setup(e){const{t:r}=A(),a=q("organization-menu");return(e,l)=>(t(),n("li",{class:i(["fr-sidemenu__item",{"fr-sidemenu__item--active":e.isOpened}])},[o("button",{class:"fr-sidemenu__btn","aria-expanded":e.isOpened,"aria-controls":m(a),"aria-current":e.isOpened},[o("div",be,[d(M,{type:"organization",src:e.organization.logo_thumbnail,size:20},null,8,["src"])]),o("p",ve,f(e.organization.name),1)],8,me),o("div",{class:"fr-collapse","data-fr-js-collapse":"",id:m(a)},[o("ul",pe,[d(fe,{iconHtml:m('<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 12V18C5 18 5 21 12 21C19 21 19 18 19 18V12" stroke="currentColor" stroke-width="1.5"/>\n<path d="M5 6V12C5 12 5 15 12 15C19 15 19 12 19 12V6" stroke="currentColor" stroke-width="1.5"/>\n<path d="M12 3C19 3 19 6 19 6C19 6 19 9 12 9C5 9 5 6 5 6C5 6 5 3 12 3Z" stroke="currentColor" stroke-width="1.5"/>\n</svg>\n'),label:m(r)("Datasets"),to:{name:"organization-datasets",params:{oid:e.organization.id}}},null,8,["iconHtml","label","to"]),d(fe,{icon:"fr-icon-line-chart-line",label:m(r)("Reuses"),to:{name:"organization-reuses",params:{oid:e.organization.id}}},null,8,["label","to"]),d(fe,{icon:"fr-icon-parent-line",label:m(r)("Members"),to:{name:"organization-members",params:{oid:e.organization.id}}},null,8,["label","to"]),d(fe,{icon:"fr-icon-user-line",label:m(r)("Profile"),to:{name:"organization-profile",params:{oid:e.organization.id}}},null,8,["label","to"])])],8,ge)],2))}}),he=C(_e,[["__scopeId","data-v-02c4027f"]]);let ye;function we(){return R(),ye||(ye=B.get(V("me/")).then((e=>e.data)))}const ke={class:"fr-container--fluid h-100"},xe={class:"fr-grid-row h-100 bg-grey-50"},ze={class:"fr-col-12 fr-col-md-4 fr-col-lg-3 fr-col-xl-2"},Ce=["aria-label"],Ae={class:"fr-sidemenu__inner"},qe=["aria-controls"],Me=["id"],Re={class:"fr-sidemenu__list"},Be={class:"fr-sidemenu__item"},Ve=["aria-controls"],Se={class:"fr-mx-1v"},Te=["id"],Ee={class:"fr-col-12 fr-col-md-8 fr-col-lg-9 fr-col-xl-10 h-100 fr-px-2w"},He=a({__name:"Admin",setup(e){const{t:r}=A(),a=S(),i=q("menu"),u=q("profil-submenu"),c=b(null),h=b(null);return v((async()=>{c.value=await we(),c.value.organizations.length>0&&(a.params.oid?h.value=a.params.oid:h.value=c.value.organizations[0].id)})),(e,b)=>{const v=l("router-view");return t(),n("div",ke,[o("div",xe,[o("div",ze,[o("nav",{class:"fr-sidemenu","aria-label":m(r)("Administration menu")},[o("div",Ae,[o("button",{class:"fr-sidemenu__btn",hidden:"","aria-controls":m(i),"aria-expanded":"false"},f(m(r)("Open menu")),9,qe),o("div",{class:"fr-collapse",id:m(i)},[o("ul",Re,[o("li",Be,[o("button",{class:"fr-sidemenu__btn border-bottom border-default-grey","aria-expanded":"false","aria-controls":m(u)},[d(T,{user:m(E),size:24,rounded:!0},null,8,["user"]),o("p",Se,f(m(r)("My Profil")),1)],8,Ve),o("div",{class:"fr-collapse",id:m(u)},[d(fe,{icon:"fr-icon-account-circle-line",label:m(r)("Me"),to:"/me"},null,8,["label"])],8,Te)]),c.value?(t(!0),n(g,{key:0},p(c.value.organizations,(e=>{return t(),_(he,{organization:e,"is-opened":(r=e.id,r===h.value)},null,8,["organization","is-opened"]);var r})),256)):s("",!0)])],8,Me)])],8,Ce)]),o("div",Ee,[(t(),_(v,{key:m(a).fullPath}))])])])}}}),Ie=C(He,[["__scopeId","data-v-288c086e"]]),Pe=["aria-label"],De={class:"fr-breadcrumb__list"},Ne={__name:"Breadcrumb",setup(e){const{t:r}=A();return(e,a)=>(t(),n("nav",{rol:"navigation","aria-label":m(r)("You're here:"),class:"fr-breadcrumb fr-mb-5v"},[o("ol",De,[h(e.$slots,"default")])],8,Pe))}},Oe={class:"fr-container--fluid"},je={key:0},Le={class:"fr-breadcrumb__link","aria-current":"page"},Ye={class:"fr-alert fr-alert--info"},$e={class:"fr-alert__title"},Ue=a({__name:"Datasets",props:{oid:{}},setup(e){const{t:r}=A(),a=e,i=`/admin/organization/${a.oid}/`,g=b(null),p=b(null);return v((async()=>g.value=await we())),y((()=>{var e,r;p.value=null!==(e=null===(r=g.value)||void 0===r?void 0:r.organizations.find((e=>e.id===a.oid)))&&void 0!==e?e:null})),(e,a)=>{const b=l("router-link");return t(),n("div",Oe,[d(Ne,null,{default:u((()=>[o("li",null,[d(b,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(m(r)("Administration")),1)])),_:1})]),p.value?(t(),n("li",je,[d(b,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(p.value.name),1)])),_:1})])):s("",!0),o("li",null,[o("a",Le,f(m(r)("Datasets")),1)])])),_:1}),o("div",Ye,[o("h3",$e,f(m(r)("This is a WIP page")),1),o("p",null,[o("a",{href:i},f(m(r)("You can manage your datasets on the current admin.")),1)])])])}}}),We={class:"fr-container--fluid"},Je={key:0},Fe={class:"fr-breadcrumb__link","aria-current":"page"},Ze={class:"fr-alert fr-alert--info"},Ge={class:"fr-alert__title"},Ke=a({__name:"Reuses",props:{oid:{}},setup(e){const{t:r}=A(),a=e,i=`/admin/organization/${a.oid}/`,g=b(null),p=b(null);return v((async()=>g.value=await we())),y((()=>{var e,r;p.value=null!==(e=null===(r=g.value)||void 0===r?void 0:r.organizations.find((e=>e.id===a.oid)))&&void 0!==e?e:null})),(e,a)=>{const b=l("router-link");return t(),n("div",We,[d(Ne,null,{default:u((()=>[o("li",null,[d(b,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(m(r)("Administration")),1)])),_:1})]),p.value?(t(),n("li",Je,[d(b,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(p.value.name),1)])),_:1})])):s("",!0),o("li",null,[o("a",Fe,f(m(r)("Reuses")),1)])])),_:1}),o("div",Ze,[o("h3",Ge,f(m(r)("This is a WIP page")),1),o("p",null,[o("a",{href:i},f(m(r)("You can manage your reuses on the current admin.")),1)])])])}}}),Qe={class:"fr-container--fluid"},Xe={class:"fr-breadcrumb__link","aria-current":"page"},er={key:0,class:"fr-h1"},rr={class:"fr-alert fr-alert--info"},ar={class:"fr-alert__title"},lr={href:"/admin/me/"},tr=a({__name:"Me",setup(e){const{t:r}=A(),a=b(null);return v((async()=>a.value=await we())),(e,i)=>{const b=l("router-link");return t(),n("div",Qe,[d(Ne,null,{default:u((()=>[o("li",null,[d(b,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(m(r)("Administration")),1)])),_:1})]),o("li",null,[o("a",Xe,f(m(r)("Me")),1)])])),_:1}),a.value?(t(),n("h1",er,f(a.value.first_name)+" "+f(a.value.last_name),1)):s("",!0),o("div",rr,[o("h3",ar,f(m(r)("This is a WIP page")),1),o("p",null,[o("a",lr,f(m(r)("You can edit your profil on the current admin.")),1)])])])}}}),nr={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},or=a({__name:"AdminDangerZone",setup:e=>(e,r)=>(t(),_(m(H),{color:"error",type:"secondary",weight:"regular"},{default:u((()=>[o("div",nr,[h(e.$slots,"default")])])),_:3}))}),ir={class:"fr-mt-n9v fr-mb-2w"},sr={class:"fr-badge fr-badge--info fr-badge--no-icon"},dr=o("span",{class:"fr-icon-user-add-line","aria-hidden":"true"},null,-1),ur={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle"},cr={class:"fr-col"},fr={class:"fr-grid-row fr-grid-row--middle"},mr={class:"fr-ml-3v fr-mt-1-5v fr-mb-0 filet filet-default-grey fr-text--sm"},br={key:0,class:"fr-col-auto fr-grid-row flex-direction-column"},vr=["disabled"],gr=["disabled","aria-controls"],pr=["aria-labelledby","id"],_r={class:"fr-container fr-container--fluid fr-container-md"},hr={class:"fr-grid-row fr-grid-row--center"},yr={class:"fr-col-12 fr-col-md-8"},wr={class:"fr-modal__body"},kr={class:"fr-modal__header"},xr=["title","aria-controls"],zr={class:"fr-modal__content"},Cr=["id"],Ar={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--right"},qr={class:"fr-col-auto"},Mr=["disabled"],Rr={class:"fr-col-auto"},Br=["disabled"],Vr=a({__name:"MembershipRequest",props:{loading:{type:Boolean},oid:{},request:{},showActions:{type:Boolean}},emits:["accept","refuse"],setup(e,{emit:r}){const a=e,i=r,{t:v}=A(),g=b(""),p=q("modal"),h=q("modalTitle");function y(){const e=document.getElementById(p);globalThis.dsfr(e).modal.conceal()}function x(){i("refuse",a.request.id,g.value),y()}function z(){g.value="",y()}return(e,r)=>{const a=l("MembershipRequest",!0);return t(),_(I,{class:"drop-shadow rounded-xxs fr-mt-3w"},{default:u((()=>[o("div",ir,[o("p",sr,[dr,c(" "+f(m(v)("Membership Request")),1)])]),o("div",ur,[o("div",cr,[o("div",fr,[d(T,{class:"fr-mr-1v",user:e.request.user,rounded:!0,size:24},null,8,["user"]),c(" "+f(m(v)("{fullName} asks to join the organization.",{fullName:e.request.user.first_name+" "+e.request.user.last_name})),1)]),o("div",mr,f(e.request.comment),1)]),e.showActions?(t(),n("div",br,[o("button",{class:"fr-btn fr-btn--sm fr-btn--icon-left fr-mb-1w fr-icon-check-line",onClick:r[0]||(r[0]=r=>e.$emit("accept",e.request.id)),disabled:e.loading,"data-testid":"accept"},f(m(v)("Accept request")),9,vr),o("button",{class:"fr-btn fr-btn--icon-left fr-btn--sm fr-btn--secondary fr-btn--secondary--error fr-icon-close-line",disabled:e.loading,"data-fr-opened":"false","aria-controls":m(p),"data-testid":"refuse"},f(m(v)("Refuse")),9,gr),(t(),_(w,{to:"body"},[o("dialog",{"aria-labelledby":m(h),role:"dialog",id:m(p),class:"fr-modal","data-testid":"modal"},[o("div",_r,[o("div",hr,[o("div",yr,[o("div",wr,[o("div",kr,[o("button",{class:"fr-btn--close fr-btn",title:m(v)("Close the modal dialog"),"aria-controls":m(p),onClick:k(z,["prevent"])},f(m(v)("Close")),9,xr)]),o("div",zr,[o("h1",{id:m(h),class:"fr-modal__title fr-mb-2w"},f(m(v)("Refuse membership request")),9,Cr),d(a,{class:"fr-mt-4w fr-mb-2w",loading:!1,oid:e.oid,request:e.request,"show-actions":!1},null,8,["oid","request"]),o("form",{onSubmit:k(x,["prevent"]),onReset:z},[d(P,{label:m(v)("You can provide the refusal reason:"),modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=e=>g.value=e),"data-testid":"comment-group"},null,8,["label","modelValue"]),o("div",Ar,[o("div",qr,[o("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary-grey-500",type:"reset",disabled:e.loading,"data-testid":"cancel-modal-button"},f(m(v)("Cancel")),9,Mr)]),o("div",Rr,[o("button",{class:"fr-btn",type:"submit",disabled:e.loading,"data-testid":"refuse-modal-button"},f(m(v)("Refuse request")),9,Br)])])],32)])])])])])],8,pr)]))])):s("",!0)])])),_:1})}}}),Sr={key:0},Tr=o("li",null,null,-1),Er={class:"fr-h1 fr-mb-2w"},Hr={class:"subtitle subtitle--uppercase"},Ir={class:"subtitle subtitle--uppercase fr-mt-2w fr-mb-1v"},Pr={class:"fr-table fr-table--layout-fixed"},Dr={scope:"col"},Nr={scope:"col"},Or={key:0,scope:"col"},jr={class:"fr-badge"},Lr={key:0},Yr=["aria-controls"],$r=["aria-labelledby","id"],Ur={class:"fr-container fr-container--fluid fr-container-md"},Wr={class:"fr-grid-row fr-grid-row--center"},Jr={class:"fr-col-12 fr-col-md-8"},Fr={class:"fr-modal__body"},Zr={class:"fr-modal__header"},Gr=["title","aria-controls"],Kr={class:"fr-modal__content"},Qr=["id"],Xr={class:"fr-grid-row fr-grid-row--middle fr-text--bold fr-mb-2w"},ea=["onSubmit"],ra={class:"fr-col"},aa={class:"fr-col-auto"},la=["disabled"],ta={class:"fr-col"},na={class:"fr-m-0 text-grey-500"},oa={class:"fr-m-0 fr-text--xs text-default-error"},ia={class:"fr-col-auto"},sa=["disabled","onClick"],da=a({__name:"Members",props:{oid:{}},setup(e){const r=e,{t:a}=A(),{toast:i}=F(),h=b([]),z=x((()=>D||M.value.some((e=>{var r;return e.user.id===(null===(r=E)||void 0===r?void 0:r.id)&&"admin"===e.role})))),C=b([]),q={name:"SomeName"},M=b([]),R=b(!1);function B(e){return"fr-modal-user-"+e}function V(e){return"fr-modal-title-user-"+e}function S(e){const r=document.getElementById(B(e));globalThis.dsfr(r).modal.conceal()}function H(e){return C.value.map((r=>{const a={...r};return a.value===e&&(a.selected=!0),a}))}async function I(){const e=await U(r.oid);M.value=e.members}async function P(){const e=await N(r.oid);h.value=e}async function Z(e){R.value=!0;const l=[];try{await W(r.oid,e),l.push(P()),l.push(I())}catch(t){i.error(a("An error occurred while accepting this membership."))}finally{Promise.all(l).finally((()=>R.value=!1))}}async function G(e,l){R.value=!0;const t=[];try{await J(r.oid,e,l),t.push(P()),t.push(I())}catch(n){i.error(a("An error occurred while refusing this membership."))}finally{Promise.all(t).finally((()=>R.value=!1))}}return y((()=>{z.value&&N(r.oid).then((e=>h.value=e))})),v((()=>{O().then(j).then((e=>C.value=e)),I()})),(e,b)=>{const v=l("router-link");return t(),n("div",null,[d(Ne,null,{default:u((()=>[o("li",null,[d(v,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(m(a)("Administration")),1)])),_:1})]),q?(t(),n("li",Sr,[d(v,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(q.name),1)])),_:1})])):s("",!0),Tr])),_:1}),o("h1",Er,f(m(a)("Members")),1),h.value.length?(t(),n(g,{key:0},[o("h2",Hr,f(m(a)("{n} requests",{n:h.value.length})),1),(t(!0),n(g,null,p(h.value,(r=>(t(),_(Vr,{class:"fr-mb-4w",key:r.id,loading:R.value,oid:e.oid,request:r,"show-actions":!0,onAccept:Z,onRefuse:G},null,8,["loading","oid","request"])))),128))],64)):s("",!0),o("h2",Ir,f(m(a)("{n} members",{n:M.value.length})),1),o("div",Pr,[o("table",null,[o("thead",null,[o("tr",null,[o("th",Dr,f(m(a)("Members")),1),o("th",Nr,f(m(a)("Status")),1),z.value?(t(),n("th",Or,f(m(a)("Action")),1)):s("",!0)])]),o("tbody",null,[(t(!0),n(g,null,p(M.value,(e=>{return t(),n("tr",{key:e.user.id},[o("td",null,f(e.user.first_name)+" "+f(e.user.last_name),1),o("td",null,[o("p",jr,f((l=e.role,null!==(b=null===(v=C.value.find((e=>e.value===l)))||void 0===v?void 0:v.label)&&void 0!==b?b:l)),1)]),z.value?(t(),n("td",Lr,[o("button",{class:"fr-btn fr-btn--sm fr-btn--tertiary-no-outline fr-icon-pencil-line","data-fr-opened":"false","aria-controls":B(e.user.id)},f(m(a)("Edit")),9,Yr),(t(),_(w,{to:"body"},[o("dialog",{"aria-labelledby":V(e.user.id),role:"dialog",id:B(e.user.id),class:"fr-modal"},[o("div",Ur,[o("div",Wr,[o("div",Jr,[o("div",Fr,[o("div",Zr,[o("button",{class:"fr-btn--close fr-btn",title:m(a)("Close the modal dialog"),"aria-controls":B(e.user.id)},f(m(a)("Close")),9,Gr)]),o("div",Kr,[o("h1",{id:V(e.user.id),class:"fr-modal__title fr-mb-2w"},f(m(a)("Edit member")),9,Qr),o("p",Xr,[d(T,{class:"fr-mr-1v",user:e.user,rounded:!0,size:24},null,8,["user"]),c(" "+f(e.user.first_name)+" "+f(e.user.last_name),1)]),o("form",{class:"fr-grid-row fr-grid-row--gutters fr-grid-row--bottom",onSubmit:k((l=>async function(e){if(e.newRole)try{R.value=!0,await Y(r.oid,e.user.id,e.newRole),I(),S(e.user.id)}catch(l){i.error(a("An error occurred while updating the member role."))}finally{R.value=!1}else S(e.user.id)}(e)),["prevent"])},[o("div",ra,[C.value.length>0?(t(),_(L,{key:0,label:m(a)("Role of the member"),"model-value":e.role,"onUpdate:modelValue":r=>e.newRole=r,options:H(e.role)},null,8,["label","model-value","onUpdate:modelValue","options"])):s("",!0)]),o("div",aa,[o("button",{class:"fr-btn",type:"submit",disabled:R.value},f(m(a)("Validate")),9,la)])],40,ea),d(or,{class:"fr-mt-2w"},{default:u((()=>[o("div",ta,[o("p",na,f(m(a)("Remove member from the organization")),1),o("p",oa,f(m(a)("Be careful, this action can't be reverse.")),1)]),o("div",ia,[o("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-logout-box-r-line",disabled:R.value,onClick:l=>async function(e){try{R.value=!0,await $(r.oid,e.user.id),I()}catch(l){i.error(a("An error occurred while removing this member."))}finally{R.value=!1}}(e)},f(m(a)("Remove member")),9,sa)])])),_:2},1024)])])])])])],8,$r)]))])):s("",!0)]);var l,b,v})),128))])])])])}}}),ua={class:"fr-container--fluid"},ca={key:0},fa={class:"fr-breadcrumb__link","aria-current":"page"},ma=["id"],ba=["disabled","onClick"],va={class:"fr-col"},ga={class:"fr-m-0 text-grey-500"},pa={class:"fr-m-0 fr-text--xs text-default-error"},_a={class:"fr-col-auto"},ha=["disabled","aria-controls"],ya=["aria-labelledby","id"],wa={class:"fr-container fr-container--fluid fr-container-md"},ka={class:"fr-grid-row fr-grid-row--center"},xa={class:"fr-col-12 fr-col-md-8"},za={class:"fr-modal__body"},Ca={class:"fr-modal__header"},Aa=["title","aria-controls"],qa={class:"fr-modal__content"},Ma=["id"],Ra={class:"fr-text--bold"},Ba={class:"fr-modal__footer"},Va={class:"fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left"},Sa=["disabled"],Ta=a({__name:"Profile",props:{oid:{}},setup(e){const{t:r}=A(),{toast:a}=F(),i=e,g=Z(),p=b(null),h=b(null),k=b(null),x=b([]),z=b(!1),C=q("modal"),M=q("modalTitle");function R(){k.value&&(z.value=!0,K(k.value.id).then((()=>{g.replace("/"),window.location.reload()})).catch((()=>a.error(r("An error occured when deleting the organization.")))).finally((()=>z.value=!1)))}function B(e,l){z.value=!0,Q(e).then((()=>a.success(r("Organization updated !")))).catch((()=>a.error(r("An error occured when updating the organization.")))).finally((()=>z.value=!1))}return v((async()=>p.value=await we())),y((async()=>{k.value=await U(i.oid)})),(e,a)=>{const i=l("router-link");return t(),n("div",ua,[d(Ne,null,{default:u((()=>[o("li",null,[d(i,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(m(r)("Administration")),1)])),_:1})]),k.value?(t(),n("li",ca,[d(i,{class:"fr-breadcrumb__link",to:"/"},{default:u((()=>[c(f(k.value.name),1)])),_:1})])):s("",!0),o("li",null,[o("a",fa,f(m(r)("Profile")),1)])])),_:1}),h.value?(t(),n("h2",{key:0,class:"subtitle subtitle--uppercase fr-mb-5v",id:h.value.legend},f(m(r)("Edit profile")),9,ma)):s("",!0),k.value?(t(),_(G,{key:1,organization:k.value,errors:x.value,showLegend:!1,showWell:!1,ref_key:"form",ref:h,onSubmit:B},{submitButton:u((({submit:e})=>[o("button",{class:"fr-btn fr-btn--icon-left fr-icon-save-line",disabled:z.value,"data-testid":"submitButton",onClick:e},f(m(r)("Save")),9,ba)])),default:u((()=>[d(or,{class:"fr-mt-6w"},{default:u((()=>[o("div",va,[o("p",ga,f(m(r)("Delete the organization")),1),o("p",pa,f(m(r)("Be careful, this action can't be reverse.")),1)]),o("div",_a,[o("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error fr-btn--icon-left fr-icon-delete-line",disabled:z.value,"data-fr-opened":"false","aria-controls":m(C)},f(m(r)("Delete")),9,ha),(t(),_(w,{to:"body"},[o("dialog",{"aria-labelledby":m(M),role:"dialog",id:m(C),class:"fr-modal"},[o("div",wa,[o("div",ka,[o("div",xa,[o("div",za,[o("div",Ca,[o("button",{class:"fr-btn--close fr-btn",title:m(r)("Close the modal dialog"),"aria-controls":m(C)},f(m(r)("Close")),9,Aa)]),o("div",qa,[o("h1",{id:m(M),class:"fr-modal__title fr-mb-2w"},f(m(r)("Are you sure you want to delete this organization ?")),9,Ma),o("p",Ra,f(m(r)("This action can't be reverse.")),1),o("p",null,f(m(r)("All content published with this organization will stay online, with the same URL but in an anonymous form, i.e. without being linked to a data producer.")),1),o("p",null,f(m(r)("If you want to delete your published content too, start by deleting the contents before deleting your account.")),1)]),o("div",Ba,[o("div",Va,[o("button",{class:"fr-btn fr-btn--secondary fr-btn--secondary--error",role:"button",disabled:z.value,onClick:R},f(m(r)("Delete")),9,Sa)])])])])])])],8,ya)]))])])),_:1})])),_:1},8,["organization","errors"])):s("",!0)])}}});X({admin_root:ee,default_lang:re.global.locale.value,explorable_resources:ae,only_locales:re.global.locale.value,schema_documentation_url:le,schema_validata_url:te,show_copy_resource_permalink:!0,title:ne});const Ea=[{path:"/me",component:tr},{path:"/organizations/:oid",children:[{path:"datasets",component:Ue,props:!0,name:"organization-datasets"},{path:"reuses",component:Ke,props:!0,name:"organization-reuses"},{path:"members",component:da,props:!0,name:"organization-members"},{path:"profile",component:Ta,props:!0,name:"organization-profile"}]}],Ha=oe({history:ie(),routes:Ea}),Ia=z(Ie);se(Ia),Ia.use(de),Ia.use(ue),Ia.use(re),Ia.use(Ha),Ia.mount("#admin"),globalThis.dsfr.start(),console.log("JS is injected !")}}}));
